{"is_source_file": true, "format": "Python", "description": "This file implements an in-memory storage layer for notes with optional persistence to a JSON file. It provides a NotesStore class with functionalities such as listing, creating, updating, and deleting notes, along with internal mechanisms for loading from and saving to disk. It is designed to be thread-safe and used within a larger note management system.", "external_files": ["json", "os", "threading", "time", "typing"], "external_methods": ["json.load", "json.dump", "os.path.exists", "os.makedirs"], "published": ["StorageError", "NotesStore"], "classes": [{"name": "StorageError", "description": "Custom exception raised when storage operations fail."}, {"name": "NotesStore", "description": "Main class providing thread-safe in-memory notes storage with optional JSON file persistence. Supports CRUD operations and pagination for notes."}], "methods": [{"name": "None __init__(self, persistence_path: Optional[str] = None)", "description": "Initializes the NotesStore, optionally loading existing notes from disk.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "None _load_from_disk(self)", "description": "Loads notes from disk if a persistence path is set and the file exists.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "None _save_to_disk(self)", "description": "Persists the current notes collection to disk as a JSON file.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "Tuple[List[Dict],Dict] list_notes(self, page: int = 1, page_size: int = 50)", "description": "Returns a paginated list of notes along with pagination metadata.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "Optional[Dict] get_note(self, note_id: int)", "description": "Retrieves a specific note by its ID.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "Dict create_note(self, title: str, content: str)", "description": "Creates a new note with a unique ID and current timestamp.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "Optional[Dict] update_note(self, note_id: int, title: Optional[str] = None, content: Optional[str] = None)", "description": "Updates the title and/or content of an existing note.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "bool delete_note(self, note_id: int)", "description": "Deletes a note by its ID.", "scope": "NotesStore", "scopeKind": "class"}], "calls": ["json.load", "json.dump", "os.path.exists", "os.makedirs", "open", "sorted", "max", "min", "len", "dict.get", "dict.values", "dict.__setitem__"], "search-terms": ["NotesStore", "persistence_path", "thread-safe notes storage", "JSON file persistence", "note CRUD", "pagination", "in-memory storage"], "state": 2, "file_id": 7, "knowledge_revision": 15, "git_revision": "", "ctags": [{"_type": "tag", "name": "NotesStore", "path": "/home/kavia/workspace/code-generation/note-management-system-39313-39326/notes_backend/app/storage/notes_store.py", "pattern": "/^class NotesStore:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "StorageError", "path": "/home/kavia/workspace/code-generation/note-management-system-39313-39326/notes_backend/app/storage/notes_store.py", "pattern": "/^class StorageError(Exception):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/note-management-system-39313-39326/notes_backend/app/storage/notes_store.py", "pattern": "/^    def __init__(self, persistence_path: Optional[str] = None) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, persistence_path: Optional[str] = None)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "_load_from_disk", "path": "/home/kavia/workspace/code-generation/note-management-system-39313-39326/notes_backend/app/storage/notes_store.py", "pattern": "/^    def _load_from_disk(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "_save_to_disk", "path": "/home/kavia/workspace/code-generation/note-management-system-39313-39326/notes_backend/app/storage/notes_store.py", "pattern": "/^    def _save_to_disk(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/note-management-system-39313-39326/notes_backend/app/storage/notes_store.py", "pattern": "/^    def create_note(self, title: str, content: str) -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "member", "signature": "(self, title: str, content: str)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/note-management-system-39313-39326/notes_backend/app/storage/notes_store.py", "pattern": "/^    def delete_note(self, note_id: int) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, note_id: int)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/note-management-system-39313-39326/notes_backend/app/storage/notes_store.py", "pattern": "/^    def get_note(self, note_id: int) -> Optional[Dict]:$/", "language": "Python", "typeref": "typename:Optional[Dict]", "kind": "member", "signature": "(self, note_id: int)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/note-management-system-39313-39326/notes_backend/app/storage/notes_store.py", "pattern": "/^    def list_notes(self, page: int = 1, page_size: int = 50) -> Tuple[List[Dict], Dict]:$/", "language": "Python", "typeref": "typename:Tuple[List[Dict],Dict]", "kind": "member", "signature": "(self, page: int = 1, page_size: int = 50)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/note-management-system-39313-39326/notes_backend/app/storage/notes_store.py", "pattern": "/^    def update_note(self, note_id: int, title: Optional[str] = None, content: Optional[str] = No/", "language": "Python", "typeref": "typename:Optional[Dict]", "kind": "member", "signature": "(self, note_id: int, title: Optional[str] = None, content: Optional[str] = None)", "scope": "NotesStore", "scopeKind": "class"}], "hash": "f8311d4ebf49c0e6670b877cfb279c35", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/app/storage/notes_store.py", "revision_history": [{"15": ""}]}